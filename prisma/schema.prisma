generator client {
  provider        = "prisma-client-js"
  output          = "../lib/generated/client"
  previewFeatures = ["metrics"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model PrivateMessage {
  id           Int       @id @default(autoincrement()) @map("msg_id") @db.UnsignedInt
  sid          Int       @default(0) @map("msg_sid") @db.UnsignedInt
  rid          Int       @default(0) @map("msg_rid") @db.UnsignedInt
  folder       pm_folder @default(inbox) @map("msg_folder")
  new          Int       @default(0) @map("msg_new") @db.TinyInt
  title        String    @map("msg_title") @db.VarChar(75)
  dateline     Int       @default(0) @map("msg_dateline") @db.UnsignedInt
  message      String    @map("msg_message") @db.Text
  related_main Int       @default(0) @map("msg_related_main") @db.UnsignedInt
  related      Int       @map("msg_related") @db.UnsignedInt
  sdeleted     Int       @default(0) @map("msg_sdeleted") @db.TinyInt
  rdeleted     Int       @default(0) @map("msg_rdeleted") @db.TinyInt

  @@map(name: "chii_pms")
}

enum pm_folder {
  inbox
  outbox
}

model chii_episodes {
  ep_id         Int    @id @default(autoincrement()) @db.UnsignedMediumInt
  ep_subject_id Int    @db.UnsignedMediumInt
  ep_sort       Float  @default(0) @db.Float
  ep_type       Int
  ep_disc       Int    @default(0) @db.UnsignedTinyInt
  ep_name       String @db.VarChar(80)
  ep_name_cn    String @db.VarChar(80)
  ep_rate       Int    @db.TinyInt
  ep_duration   String @db.VarChar(80)
  ep_airdate    String @db.VarChar(80)
  ep_online     String @db.MediumText
  ep_comment    Int    @db.UnsignedMediumInt
  ep_resources  Int    @db.UnsignedMediumInt
  ep_desc       String @db.MediumText
  ep_dateline   Int    @db.UnsignedInt
  ep_lastpost   Int    @db.UnsignedInt
  ep_lock       Int    @default(0) @db.UnsignedTinyInt
  ep_ban        Int    @default(0) @db.UnsignedTinyInt

  @@index([ep_ban], map: "ep_ban")
  @@index([ep_disc], map: "ep_disc")
  @@index([ep_lastpost], map: "ep_lastpost")
  @@index([ep_sort], map: "ep_sort")
  @@index([ep_subject_id], map: "ep_subject_id")
  @@index([ep_subject_id, ep_ban, ep_sort], map: "ep_subject_id_2")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by the Prisma Client.
model Friends {
  frd_uid         Int    @default(0) @db.UnsignedMediumInt
  frd_fid         Int    @default(0) @db.UnsignedMediumInt
  frd_grade       Int    @default(1) @db.UnsignedTinyInt
  frd_dateline    Int    @default(0) @db.UnsignedInt
  frd_description String @db.Char(255)

  @@unique([frd_uid, frd_fid])
  @@index([frd_fid], map: "frd_fid")
  @@index([frd_uid], map: "uid")
  @@map("chii_friends")
}

model GroupMembers {
  gmb_uid       Int     @default(0) @db.MediumInt
  gmb_gid       Int     @default(0) @db.SmallInt
  gmb_moderator Boolean @default(false)
  gmb_dateline  Int     @default(0) @db.UnsignedInt

  @@id([gmb_uid, gmb_gid])
  @@map("chii_group_members")
}

// 回复
model GroupPosts {
  id       Int    @id @default(autoincrement()) @map("grp_pst_id") @db.UnsignedMediumInt
  mid      Int    @map("grp_pst_mid") @db.UnsignedMediumInt
  uid      Int    @map("grp_pst_uid") @db.UnsignedMediumInt
  related  Int    @default(0) @map("grp_pst_related") @db.UnsignedMediumInt
  content  String @map("grp_pst_content") @db.MediumText
  state    Int    @map("grp_pst_state")
  dateline Int    @default(0) @map("grp_pst_dateline") @db.UnsignedInt

  @@index([related], map: "grp_pst_related")
  @@index([uid], map: "grp_pst_uid")
  @@index([mid], map: "pss_topic_id")
  @@map("chii_group_posts")
}

model GroupTopics {
  id       Int    @id @default(autoincrement()) @map("grp_tpc_id") @db.UnsignedMediumInt
  gid      Int    @map("grp_tpc_gid") @db.UnsignedMediumInt
  uid      Int    @map("grp_tpc_uid") @db.UnsignedMediumInt
  title    String @map("grp_tpc_title") @db.VarChar(80)
  dateline Int    @default(0) @map("grp_tpc_dateline") @db.UnsignedInt
  lastpost Int    @default(0) @map("grp_tpc_lastpost") @db.UnsignedInt
  replies  Int    @default(0) @map("grp_tpc_replies") @db.UnsignedMediumInt
  state    Int    @map("grp_tpc_state")
  display  Int    @default(0) @map("grp_tpc_display")

  @@index([display], map: "grp_tpc_display")
  @@index([gid], map: "grp_tpc_gid")
  @@index([lastpost], map: "grp_tpc_lastpost")
  @@index([uid], map: "grp_tpc_uid")
  @@map("chii_group_topics")
}

model chii_groups {
  grp_id         Int     @id @default(autoincrement()) @db.UnsignedSmallInt
  grp_cat        Int     @default(0) @db.UnsignedSmallInt
  grp_name       String  @db.Char(50)
  grp_title      String  @db.Char(50)
  grp_icon       String  @db.VarChar(255)
  grp_creator    Int     @default(0) @db.UnsignedMediumInt
  grp_topics     Int     @default(0) @db.UnsignedMediumInt
  grp_posts      Int     @default(0) @db.UnsignedMediumInt
  grp_members    Int     @default(1) @db.UnsignedMediumInt
  grp_desc       String  @db.Text
  grp_lastpost   Int     @db.UnsignedInt
  grp_builddate  Int     @db.UnsignedInt
  grp_accessible Boolean @default(true)
  grp_nsfw       Boolean
}

model Members {
  id             Int     @id @default(autoincrement()) @map("uid") @db.UnsignedMediumInt
  username       String  @unique(map: "username") @default("") @db.Char(15)
  nickname       String  @db.VarChar(30)
  avatar         String  @db.VarChar(255)
  groupid        Int     @default(0) @db.UnsignedSmallInt
  regdate        Int     @default(0) @db.UnsignedInt
  lastvisit      Int     @default(0) @db.UnsignedInt
  lastactivity   Int     @default(0) @db.UnsignedInt
  lastpost       Int     @default(0) @db.UnsignedInt
  dateformat     String  @default("") @db.Char(10)
  timeformat     Boolean @default(false)
  timeoffset     String  @default("") @db.Char(4)
  newpm          Boolean @default(false)
  new_notify     Int     @default(0) @db.UnsignedSmallInt
  sign           String  @db.VarChar(255)
  password_crypt String  @db.Char(64)
  email          String  @default("") @db.Char(50)

  @@map("chii_members")
}

model subjectFields {
  subject_id     Int      @id @default(autoincrement()) @map("field_sid") @db.UnsignedMediumInt
  field_tid      Int      @default(0) @db.UnsignedSmallInt
  field_tags     String   @db.MediumText
  field_rate_1   Int      @default(0) @db.UnsignedMediumInt
  field_rate_2   Int      @default(0) @db.UnsignedMediumInt
  field_rate_3   Int      @default(0) @db.UnsignedMediumInt
  field_rate_4   Int      @default(0) @db.UnsignedMediumInt
  field_rate_5   Int      @default(0) @db.UnsignedMediumInt
  field_rate_6   Int      @default(0) @db.UnsignedMediumInt
  field_rate_7   Int      @default(0) @db.UnsignedMediumInt
  field_rate_8   Int      @default(0) @db.UnsignedMediumInt
  field_rate_9   Int      @default(0) @db.UnsignedMediumInt
  field_rate_10  Int      @default(0) @db.UnsignedMediumInt
  field_airtime  Boolean
  field_rank     Int      @default(0) @db.UnsignedInt
  field_year     Int      @db.Year
  field_mon      Int      @db.TinyInt
  field_week_day Boolean
  field_date     DateTime @db.Date
  field_redirect Int      @default(0) @db.UnsignedMediumInt

  @@index([field_date], map: "field_date")
  @@index([field_rank], map: "field_rank")
  @@index([field_year], map: "field_year")
  @@index([field_year, field_mon], map: "field_year_mon")
  @@index([subject_id, field_date], map: "query_date")
  @@index([field_tid], map: "sort_id")
  @@index([field_airtime], map: "subject_airtime")
  @@map("chii_subject_fields")
}

model chii_subject_topics {
  sbj_tpc_id         Int     @id @default(autoincrement()) @db.UnsignedMediumInt
  sbj_tpc_subject_id Int     @db.UnsignedMediumInt
  sbj_tpc_uid        Int     @db.UnsignedMediumInt
  sbj_tpc_title      String  @db.VarChar(80)
  sbj_tpc_dateline   Int     @default(0) @db.UnsignedInt
  sbj_tpc_lastpost   Int     @default(0) @db.UnsignedInt
  sbj_tpc_replies    Int     @default(0) @db.UnsignedMediumInt
  sbj_tpc_state      Boolean
  sbj_tpc_display    Int     @default(0)

  @@index([sbj_tpc_lastpost, sbj_tpc_subject_id, sbj_tpc_display], map: "sbj_tpc_lastpost")
  @@index([sbj_tpc_uid], map: "sbj_tpc_uid")
  @@index([sbj_tpc_display], map: "tpc_display")
  @@index([sbj_tpc_subject_id], map: "tpc_subject_id")
}

model Subjects {
  subject_id           Int     @id @default(autoincrement()) @db.UnsignedMediumInt
  subject_type_id      Int     @default(0) @db.UnsignedSmallInt
  subject_name         String  @db.VarChar(80)
  subject_name_cn      String  @db.VarChar(80)
  subject_uid          String  @db.VarChar(20)
  subject_creator      Int     @db.UnsignedMediumInt
  subject_dateline     Int     @default(0) @db.UnsignedInt
  subject_image        String  @db.VarChar(255)
  subject_platform     Int     @default(0) @db.UnsignedSmallInt
  field_infobox        String  @db.MediumText
  field_summary        String  @db.MediumText
  field_5              String  @db.MediumText
  field_volumes        Int     @default(0) @db.UnsignedMediumInt
  field_eps            Int     @default(0) @db.UnsignedMediumInt
  subject_wish         Int     @default(0) @db.UnsignedMediumInt
  subject_collect      Int     @default(0) @db.UnsignedMediumInt
  subject_doing        Int     @default(0) @db.UnsignedMediumInt
  subject_on_hold      Int     @default(0) @db.UnsignedMediumInt
  subject_dropped      Int     @default(0) @db.UnsignedMediumInt
  subject_series       Boolean @default(false)
  subject_series_entry Int     @default(0) @db.UnsignedMediumInt
  subject_idx_cn       String  @db.VarChar(1)
  subject_airtime      Boolean
  subject_nsfw         Boolean
  subject_ban          Boolean @default(false)

  @@index([subject_ban, subject_type_id, subject_series, subject_platform], map: "browser")
  @@index([subject_ban, subject_type_id, subject_series, subject_platform, subject_name], map: "order_by_name")
  @@index([subject_airtime], map: "subject_airtime")
  @@index([subject_ban], map: "subject_ban")
  @@index([subject_creator], map: "subject_creator")
  @@index([subject_idx_cn, subject_type_id], map: "subject_idx_cn")
  @@index([subject_name], map: "subject_name")
  @@index([subject_name_cn], map: "subject_name_cn")
  @@index([subject_nsfw], map: "subject_nsfw")
  @@index([subject_platform], map: "subject_platform")
  @@index([subject_series], map: "subject_series")
  @@index([subject_series_entry], map: "subject_series_entry")
  @@index([subject_type_id], map: "subject_type_id")
  @@map("chii_subjects")
}

enum chii_person_alias_prsn_cat {
  prsn
  crt
}

enum chii_person_cs_index_prsn_type {
  prsn
  crt
}

enum chii_person_fields_prsn_cat {
  prsn
  crt
}

enum chii_person_relationship_prsn_type {
  prsn
  crt
}

enum chii_person_collects_prsn_clt_cat {
  prsn
  crt
}

enum chii_person_relationship_relat_prsn_type {
  prsn
  crt
}
