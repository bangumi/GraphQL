generator client {
  provider        = "prisma-client-js"
  output          = "../lib/generated/client"
  previewFeatures = ["metrics"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// 回复
model GroupPosts {
  id       Int    @id @default(autoincrement()) @map("grp_pst_id") @db.UnsignedMediumInt
  mid      Int    @map("grp_pst_mid") @db.UnsignedMediumInt
  uid      Int    @map("grp_pst_uid") @db.UnsignedMediumInt
  related  Int    @default(0) @map("grp_pst_related") @db.UnsignedMediumInt
  content  String @map("grp_pst_content") @db.MediumText
  state    Int    @map("grp_pst_state")
  dateline Int    @default(0) @map("grp_pst_dateline") @db.UnsignedInt

  @@index([related], map: "grp_pst_related")
  @@index([uid], map: "grp_pst_uid")
  @@index([mid], map: "pss_topic_id")
  @@map("chii_group_posts")
}

model GroupTopics {
  id       Int    @id @default(autoincrement()) @map("grp_tpc_id") @db.UnsignedMediumInt
  gid      Int    @map("grp_tpc_gid") @db.UnsignedMediumInt
  uid      Int    @map("grp_tpc_uid") @db.UnsignedMediumInt
  title    String @map("grp_tpc_title") @db.VarChar(80)
  dateline Int    @default(0) @map("grp_tpc_dateline") @db.UnsignedInt
  lastpost Int    @default(0) @map("grp_tpc_lastpost") @db.UnsignedInt
  replies  Int    @default(0) @map("grp_tpc_replies") @db.UnsignedMediumInt
  state    Int    @map("grp_tpc_state")
  display  Int    @default(0) @map("grp_tpc_display")

  @@index([display], map: "grp_tpc_display")
  @@index([gid], map: "grp_tpc_gid")
  @@index([lastpost], map: "grp_tpc_lastpost")
  @@index([uid], map: "grp_tpc_uid")
  @@map("chii_group_topics")
}

model chii_subject_topics {
  sbj_tpc_id         Int     @id @default(autoincrement()) @db.UnsignedMediumInt
  sbj_tpc_subject_id Int     @db.UnsignedMediumInt
  sbj_tpc_uid        Int     @db.UnsignedMediumInt
  sbj_tpc_title      String  @db.VarChar(80)
  sbj_tpc_dateline   Int     @default(0) @db.UnsignedInt
  sbj_tpc_lastpost   Int     @default(0) @db.UnsignedInt
  sbj_tpc_replies    Int     @default(0) @db.UnsignedMediumInt
  sbj_tpc_state      Boolean
  sbj_tpc_display    Int     @default(0)

  @@index([sbj_tpc_lastpost, sbj_tpc_subject_id, sbj_tpc_display], map: "sbj_tpc_lastpost")
  @@index([sbj_tpc_uid], map: "sbj_tpc_uid")
  @@index([sbj_tpc_display], map: "tpc_display")
  @@index([sbj_tpc_subject_id], map: "tpc_subject_id")
}
